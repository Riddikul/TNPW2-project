<!DOCTYPE html>
<html lang="en">
  <%- include("../partials/head") %>

  <body class="d-flex flex-column vh-100">
    <%- include("../partials/navbar") %>
    <main class="container mt-5">
      <%- include("../partials/flash") %>
      
      <% if (locals.errorMessage) { %>
        <div class="alert alert-danger">
          <%= locals.errorMessage %>
        </div>
      <% } %>

      <h1 class="text-center">Registrace</h1>
      <div class="col-6 offset-3">
        <form
          action="/register"
          method="post"
          class="validated-form"
          novalidate
        >
          <div class="mb-3">
            <label for="username" class="form-label">Přihlašovací jméno:</label>
            <input
              type="text"
              name="username"
              id="username"
              
              class="form-control"
              value="<%= username %>"
              required
            />
            
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">Email:</label>
            <input
              type="email"
              name="email"
              id="email"
              placeholder="example@email.com"
              class="form-control"
              value="<%= email %>"
              required
            ></input>
           
          </div>
          
          <div class="mb-3">
            <label for="password" class="form-label">Heslo:</label>
            <input 
              type="password"
              name="password"
              id="password"
             
              class="form-control"
              required
            ></input>

          </div>

            
          <div class="mb-3">
            <label for="password" class="form-label">Ověření hesla:</label>
            <input 
              type="password"
              name="password2"
              id="password"
             
              class="form-control"
              required
            ></input>

          </div>
          
          
          <button class="btn btn-success">Registrovat</button>
        </form>
      </div>
    </main>

    <%- include("../partials/footer") %> 
    <%- include("../partials/scripts") %>

    <script>
      document.querySelector('form').addEventListener('submit', function(event) {
          var password = document.getElementById('password').value;
          var password2 = document.getElementById('password2').value;
          if (password !== password2) {
              event.preventDefault();
              var errorElement = document.getElementById('error-message');
              if (!errorElement) {
                  errorElement = document.createElement('p');
                  errorElement.id = 'error-message';
                  errorElement.style.color = 'red';
                  errorElement.textContent = 'Hesla se neshodují. Zkuste to znovu.';
                  this.insertBefore(errorElement, this.firstChild);
              }
          }
      });
      </script>

  </body>
</html>
